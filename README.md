# مشروع نظام إدارة مكاتب المحاماة (SaaS متعدد المستأجرين)

هذا المستند يوضح خطة العمل وتحليل المتطلبات لمشروع نظام إدارة مكاتب المحاماة في مصر.

---

## المرحلة الأولى: تحليل المتطلبات (Requirements Analysis)

بناءً على طلبك، تم تحليل المتطلبات الأساسية للنظام، وهي كالتالي:

### 1. المتطلبات الوظيفية (Functional Requirements)

#### أ. نظام إدارة القضايا:
- **تسجيل القضايا:** إمكانية إضافة قضايا جديدة مع تحديد نوعها (مدني، جنائي، إداري، أسرة، تجاري، عمالي، إلخ).
- **معلومات القضية:**
    - **ترقيم:** تخصيص رقم قضية رسمي ورقم ملف داخلي للمكتب.
    - **الأطراف:** ربط القضية بالموكل (عميل أو أكثر)، الخصم، محامي الخصم، والشهود.
    - **الاختصاص:** تحديد المحكمة المختصة (ابتدائي، استئناف، نقض) والدائرة القضائية.
- **فريق العمل:** تعيين محامٍ أو أكثر من فريق المكتب لمتابعة القضية.

#### ب. إدارة المواعيد والجلسات:
- **جدولة:** نظام لجدولة مواعيد الجلسات والاجتماعات والمهام الإدارية.
- **تنبيهات:** إرسال إشعارات وتنبيهات تلقائية للمحامين المسؤولين قبل مواعيد الجلسات.
- **محاضر الجلسات:** تسجيل تفاصيل ومحاضر الجلسات وتاريخها للرجوع إليها.
- **متابعة التطورات:** سجل زمني لتتبع آخر المستجدات والإجراءات التي تمت في كل قضية.

#### ج. الإدارة المالية:
- **الأتعاب (الإيرادات):**
    - تسجيل عقود الأتعاب المتفق عليها مع العملاء.
    - متابعة الدفعات المسددة والمتبقية من الأتعاب.
- **المصروفات:**
    - تسجيل كافة المصروفات المتعلقة بالقضايا (رسوم قضائية، مصاريف انتقال، رسوم استخراج مستندات، إلخ).
    - ربط كل مصروف بالقضية الخاصة به وتحديد المحامي الذي قام بالصرف.
- **تقارير مالية:** إنشاء تقارير توضح الموقف المالي لكل قضية (إجمالي الإيرادات والمصروفات).

### 2. المتطلبات غير الوظيفية (Non-Functional Requirements)

- **التعددية (Multi-tenancy):** تصميم النظام بحيث يعمل كل مكتب محاماة (مستأجر) في بيئة معزولة تمامًا عن الآخرين، مع قاعدة بيانات وبيانات خاصة به.
- **اللغة:** واجهة النظام بالكامل باللغة العربية، مع مراعاة المصطلحات القانونية المصرية الدقيقة.
- **الأمان:** حماية عالية لبيانات القضايا والعملاء وسرية المعلومات.
- **سهولة الاستخدام (Usability):** تصميم واجهة مستخدم بسيطة وواضحة (UI/UX) لا تتطلب خبرة تقنية كبيرة.
- **الأداء (Performance):** سرعة استجابة عالية للنظام لضمان كفاءة العمل.
- **قابلية التوسع (Scalability):** بنية تحتية مرنة تسمح بإضافة مميزات جديدة وتوسع النظام مستقبلاً.

---

**الخطوة التالية:**

بذلك نكون قد انتهينا من المرحلة الأولى "تحليل المتطلبات".

**أرجو منكم مراجعة هذا التحليل والموافقة عليه، وبعد ذلك سأنتقل إلى المرحلة الثانية وهي "تصميم قاعدة البيانات" (Database Design) بناءً على هذه المتطلبات.**

---

## المرحلة الثانية: تصميم قاعدة البيانات (Database Design)

بناءً على تحليل المتطلبات، هذا هو التصميم المقترح لقاعدة البيانات. تم تصميم الهيكل ليكون مرنًا وداعمًا لبيئة متعددة المستأجرين، حيث يتم عزل بيانات كل مكتب محاماة.

### مخطط العلاقات (Entity-Relationship Diagram - ERD) - مفهومي

```
[Tenant] 1--N [User]
[Tenant] 1--N [Client]
[Tenant] 1--N [Case]

[Case] M--N [Client] (via CaseClients)
[Case] M--N [User] (via CaseLawyers)

[Case] 1--N [Session]
[Case] 1--N [Revenue]
[Case] 1--N [Expense]

[User] 1--N [Expense]
```

### تفاصيل الجداول (Tables Schema)

**1. `Tenants` (المستأجرون - مكاتب المحاماة)**
   - `id` (PK, Auto-increment)
   - `name` (VARCHAR) - اسم مكتب المحاماة
   - `created_at` (DATETIME)

**2. `Users` (المستخدمون - المحامون والمسؤولون)**
   - `id` (PK, Auto-increment)
   - `tenant_id` (FK to Tenants) - لربط المستخدم بالمكتب الخاص به
   - `full_name` (VARCHAR) - الاسم الكامل
   - `email` (VARCHAR, UNIQUE) - البريد الإلكتروني
   - `password` (VARCHAR) - كلمة المرور (ستكون مشفرة)
   - `role` (VARCHAR) - الدور (مثال: 'admin', 'lawyer')

**3. `Clients` (العملاء)**
   - `id` (PK, Auto-increment)
   - `tenant_id` (FK to Tenants)
   - `name` (VARCHAR) - اسم العميل
   - `phone_number` (VARCHAR) - رقم الهاتف
   - `address` (TEXT) - العنوان

**4. `Cases` (القضايا)**
   - `id` (PK, Auto-increment)
   - `tenant_id` (FK to Tenants)
   - `case_number` (VARCHAR) - رقم القضية الرسمي
   - `internal_file_number` (VARCHAR) - رقم الملف الداخلي للمكتب
   - `case_type` (VARCHAR) - نوع القضية (مدني، جنائي، إلخ)
   - `court_name` (VARCHAR) - اسم المحكمة
   - `judicial_circuit` (VARCHAR) - الدائرة القضائية
   - `opponent_name` (VARCHAR) - اسم الخصم
   - `opponent_lawyer` (VARCHAR) - محامي الخصم
   - `status` (VARCHAR) - حالة القضية (متداولة، مؤجلة، محكوم فيها)

**5. `CaseClients` (جدول وسيط لربط القضايا بالعملاء)**
   - `case_id` (FK to Cases)
   - `client_id` (FK to Clients)

**6. `CaseLawyers` (جدول وسيط لربط القضايا بالمحامين)**
   - `case_id` (FK to Cases)
   - `user_id` (FK to Users)

**7. `Sessions` (الجلسات)**
   - `id` (PK, Auto-increment)
   - `case_id` (FK to Cases)
   - `session_date` (DATETIME) - تاريخ ووقت الجلسة
   - `minutes_of_meeting` (TEXT) - محضر الجلسة
   - `next_session_date` (DATETIME, NULLABLE) - تاريخ الجلسة القادمة

**8. `Revenues` (الإيرادات - أتعاب المحاماة)**
   - `id` (PK, Auto-increment)
   - `case_id` (FK to Cases)
   - `description` (VARCHAR) - وصف البند (دفعة أتعاب، أتعاب اتفاق)
   - `amount` (DECIMAL) - المبلغ
   - `payment_status` (VARCHAR) - حالة السداد (مدفوع، جزئي، لم يدفع)
   - `due_date` (DATE) - تاريخ الاستحقاق
   - `paid_at` (DATE, NULLABLE) - تاريخ السداد الفعلي

**9. `Expenses` (المصروفات)**
   - `id` (PK, Auto-increment)
   - `case_id` (FK to Cases)
   - `user_id` (FK to Users) - المحامي الذي قام بالصرف
   - `description` (VARCHAR) - وصف المصروف (رسوم، انتقالات)
   - `amount` (DECIMAL) - المبلغ
   - `expense_date` (DATE) - تاريخ الصرف

---

**الخطوة التالية:**

بذلك نكون قد انتهينا من المرحلة الثانية "تصميم قاعدة البيانات".

**أرجو منكم مراجعة هذا الهيكل والموافقة عليه، وبعد ذلك سأنتقل إلى المرحلة الثالثة وهي "تصميم واجهة المستخدم" (UI/UX Design).**

---

## المرحلة الثالثة: تصميم واجهة المستخدم (UI/UX Design)

بناءً على المتطلبات وهيكل قاعدة البيانات، تم تصميم المخططات الأولية (Wireframes) التالية لتوضيح واجهات النظام الرئيسية. تركز التصاميم على البساطة وسهولة الاستخدام، مع واجهة باللغة العربية.

### 1. لوحة التحكم الرئيسية (Dashboard)

```
+--------------------------------------------------------------------------+
| لوحة التحكم                                       [اسم المستخدم] [خروج] |
+--------------------------------------------------------------------------+
| [قائمة التنقل]                                                          |
| - لوحة التحكم                                                            |
| - القضايا                                                                |
| - العملاء                                                                |
| - المالية                                                                |
| - المستخدمون                                                            |
| - التقارير                                                              |
+--------------------------------------------------------------------------+
|                                                                          |
|  **ملخص سريع**                                                          |
|  +-----------------+    +-----------------+    +----------------------+  |
|  |  القضايا النشطة |    |  جلسات اليوم    |    |    إجمالي الأتعاب    |  |
|  |       [15]      |    |       [3]       |    |     [150,000] ج.م    |  |
|  +-----------------+    +-----------------+    +----------------------+  |
|                                                                          |
|  **آخر التطورات في القضايا**                                             |
|  - [قضية #101] تم تأجيل الجلسة إلى [التاريخ].                             |
|  - [قضية #102] تم إضافة مستند جديد.                                       |
|  - [قضية #103] تم سداد دفعة من الأتعاب.                                  |
|                                                                          |
+--------------------------------------------------------------------------+
```

### 2. صفحة إضافة قضية جديدة

```
+--------------------------------------------------------------------------+
| إضافة قضية جديدة                                                         |
+--------------------------------------------------------------------------+
|                                                                          |
|  **معلومات أساسية**                                                      |
|  رقم القضية الرسمي: [_________]   رقم الملف الداخلي: [_________]          |
|  نوع القضية: [قائمة منسدلة: مدني، جنائي...]                               |
|                                                                          |
|  **الأطراف**                                                             |
|  العميل (الموكل): [بحث واختيار عميل/عملاء]                                |
|  اسم الخصم: [_________________]   محامي الخصم: [_________________]        |
|                                                                          |
|  **تفاصيل المحكمة**                                                      |
|  المحكمة: [_________________]      الدائرة: [_________________]           |
|                                                                          |
|  **فريق العمل**                                                          |
|  المحامي المسؤول: [قائمة منسدلة بأسماء المحامين]                          |
|                                                                          |
|  [حفظ] [إلغاء]                                                           |
|                                                                          |
+--------------------------------------------------------------------------+
```

### 3. صفحة متابعة القضايا

```
+--------------------------------------------------------------------------+
| قائمة القضايا                                       [إضافة قضية جديدة +] |
+--------------------------------------------------------------------------+
| [بحث: ________] [فلتر حسب النوع] [فلتر حسب الحالة]                       |
+--------------------------------------------------------------------------+
| | رقم الملف | نوع القضية | العميل      | الخصم       | آخر تحديث  | الحالة     |
| +----------+-------------+-------------+-------------+------------+------------+
| | 101      | مدني        | [اسم العميل] | [اسم الخصم] | [التاريخ]  | متداولة   |
| | 102      | جنائي       | [اسم العميل] | [اسم الخصم] | [التاريخ]  | مؤجلة     |
| | 103      | إداري       | [اسم العميل] | [اسم الخصم] | [التاريخ]  | محكوم فيها|
+--------------------------------------------------------------------------+
```

### 4. صفحة التقارير المالية

```
+--------------------------------------------------------------------------+
| التقارير المالية                                                          |
+--------------------------------------------------------------------------+
| [تحديد فترة زمنية: من ________ إلى ________] [تصدير كـ PDF]               |
+--------------------------------------------------------------------------+
|                                                                          |
|  **ملخص مالي**                                                          |
|  إجمالي الإيرادات (الأتعاب): [___________] ج.م                            |
|  إجمالي المصروفات: [___________] ج.م                                      |
|  الصافي: [___________] ج.م                                               |
|                                                                          |
|  **تفاصيل الإيرادات**                                                    |
|  | القضية     | الوصف          | المبلغ      | الحالة      | تاريخ      |
|  +------------+-----------------+------------+-------------+------------+
|  | [قضية #101]| دفعة أولى      | [المبلغ]   | مدفوع      | [التاريخ]  |
|                                                                          |
|  **تفاصيل المصروفات**                                                    |
|  | القضية     | الوصف          | المبلغ      | صرف بواسطة | تاريخ      |
|  +------------+-----------------+------------+-------------+------------+
|  | [قضية #102]| رسوم قضائية    | [المبلغ]   | [اسم محام] | [التاريخ]  |
|                                                                          |
+--------------------------------------------------------------------------+
```

---

**الخطوة التالية:**

بذلك نكون قد انتهينا من المرحلة الثالثة "تصميم واجهة المستخدم".

**أرجو منكم مراجعة هذه المخططات والموافقة عليها. بعد موافقتكم، يمكننا البدء في مراحل التطوير الفعلية (Backend & Frontend).**
